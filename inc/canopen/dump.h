/* Copyright (c) 2014-2017, Marel
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
 * REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
 * AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
 * INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
 * LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE
 * OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
 * PERFORMANCE OF THIS SOFTWARE.
 */

#ifndef CANOPEN_DUMP_H_
#define CANOPEN_DUMP_H_

#define CO_DUMP_FILTER_SHIFT 8
#define CO_DUMP_PDO_FILTER_SHIFT 16
#define CO_DUMP_FILTER_MASK 0x00ffff00

enum co_dump_options {
	CO_DUMP_TCP = 1,
	CO_DUMP_TIMESTAMP = 1 << 1,
	CO_DUMP_FILE = 1 << 2,

	CO_DUMP_FILTER_NMT = 1 << (CO_DUMP_FILTER_SHIFT + 0),
	CO_DUMP_FILTER_SYNC = 1 << (CO_DUMP_FILTER_SHIFT + 1),
	CO_DUMP_FILTER_TIMESTAMP = 1 << (CO_DUMP_FILTER_SHIFT + 2),
	CO_DUMP_FILTER_EMCY = 1 << (CO_DUMP_FILTER_SHIFT + 3),
	CO_DUMP_FILTER_SDO = 1 << (CO_DUMP_FILTER_SHIFT + 4),
	CO_DUMP_FILTER_HEARTBEAT = 1 << (CO_DUMP_FILTER_SHIFT + 5),

	CO_DUMP_FILTER_PDO1 = 1 << (CO_DUMP_PDO_FILTER_SHIFT + 0),
	CO_DUMP_FILTER_PDO2 = 1 << (CO_DUMP_PDO_FILTER_SHIFT + 1),
	CO_DUMP_FILTER_PDO3 = 1 << (CO_DUMP_PDO_FILTER_SHIFT + 2),
	CO_DUMP_FILTER_PDO4 = 1 << (CO_DUMP_PDO_FILTER_SHIFT + 3),

	CO_DUMP_FILTER_PDO = CO_DUMP_FILTER_PDO1 | CO_DUMP_FILTER_PDO2
			   | CO_DUMP_FILTER_PDO3 | CO_DUMP_FILTER_PDO4,
};

int co_dump(const char* addr, enum co_dump_options options);

#endif /*  CANOPEN_DUMP_H_ */
